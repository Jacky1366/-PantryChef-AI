<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/static/css/add-food.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <title>Add Food â€“ PantryChef</title>
</head>

<body>
    <nav class="navbar">
        <div class="brand">PantryChef</div>
        <div class="nav-links">
            <a href="/QNA">FAQ</a>
            <a href="/">Log out</a>
        </div>
    </nav>

    <main class="container">
        <div class="header">
            <img src="https://c.animaapp.com/mi1yoapbvFsmXd/img/rectangle.png" class="header-img" />
            <h1>What do you want to put into the fridge?</h1>
        </div>

        <div class="search-card">
            <input id="searchInput" type="text" placeholder="Search for an ingredient..." />
            <button onclick="addIngredient()">
                <img src="https://c.animaapp.com/mi1yoapbvFsmXd/img/iconamoon-enter-bold.svg">
            </button>
        </div>

        <div class="warning-card">
            <img src="https://c.animaapp.com/mi1yoapbvFsmXd/img/si-warning-fill.svg" class="warn-icon" />
            <span>Warning</span>
        </div>
    </main>

    <script>
        async function addIngredient() {
            const input = document.getElementById('searchInput');
            const name = input.value.trim();
            if (!name) return;

            try {
                await fetch('/api/pantry/', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name: name })
                });

                window.location.href = '/food?query=' + encodeURIComponent(name);
            } catch (err) {
                alert('Failed to add ingredient');
            }
        }
    </script>
</body>
</html>
